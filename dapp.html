<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
  </head>
  <body>
    Hello there. I am a dapp. Open your console.
    <script type="text/javascript" charset="utf-8">
      var hubExtId = "ojlfljfgbdipegekhflbfmbhdhachcpo";

      var port = chrome.runtime.connect(hubExtId, {name: 'Dapp'});
      port.onMessage.addListener(function(msg) {
        console.log("dapp received from hub: ", msg);
        if(msg.type === 'announceExtensions') {
          console.log('dapp received registry:', msg.data.extensions)
        }
      });

      var event = { type: 'requestExtensions' }
      port.postMessage(event);
      console.log('dapp dispatched requestExtensions')
    </script>
  </body>
</html>
